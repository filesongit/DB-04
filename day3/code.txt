import {legacy_createStore, combineReducers} from "redux";
let createStore = legacy_createStore;
let combineReducer = combineReducers;
// action type
const ADD_HERO = "ADD_HERO";
const REMOVE_HERO = "REMOVE_HERO";
const SET_HERO = "SET_HERO";

const ADD_MOVIE = "ADD_MOVIE";
const REMOVE_MOVIE = "REMOVE_MOVIE";
const SET_MOVIE = "SET_MOVIE";
// action creators
let addHero = () => {
    return {
        type : ADD_HERO
    }
}
let removeHero = () => {
    return {
        type : REMOVE_HERO
    }
}
let setHero = (count) => {
    return {
        type : SET_HERO,
        payload : count
    }
}
let addMovie = () => {
    return {
        type : ADD_MOVIE
    }
}
let removeMovie = () => {
    return {
        type : REMOVE_MOVIE
    }
}
let setMovie = (count) => {
    return {
        type : SET_MOVIE,
        payload : count
    }
}
// default / intial state
const initalHeroState = {
    numberOfHeroes : 0
}
const initalMovieState = {
    numberOfMovies : 0
}
// reducer pure function
let heroReducer = (state = initalHeroState, action) => {
    switch(action.type){
        case ADD_HERO : return { ...state, numberOfHeroes : state.numberOfHeroes + 1 }
        case REMOVE_HERO : return { ...state, numberOfHeroes : state.numberOfHeroes - 1 }
        case SET_HERO : return { ...state, numberOfHeroes :  action.payload }
        default : return state
    }
};
let movieReducer = (state = initalMovieState, action) => {
    switch(action.type){
        case ADD_MOVIE : return { ...state, numberOfMovies : state.numberOfMovies + 1 }
        case REMOVE_MOVIE : return { ...state, numberOfMovies : state.numberOfMovies - 1 }
        case SET_MOVIE : return { ...state, numberOfMovies :  action.payload }
        default : return state
    }
};
let rootReducer = combineReducer({hero: heroReducer, movie: movieReducer})
let store = createStore(rootReducer);
// intial store
console.log("Initial Value ",store.getState());
// subscribe
let unsubscribe = store.subscribe(function(){
    console.log(store.getState());
});
store.dispatch(addHero());// 1
store.dispatch(addHero());// 2
store.dispatch(addHero());// 3
store.dispatch(removeHero());// 2
store.dispatch(addHero());// 3
store.dispatch(removeHero());// 2
store.dispatch(addHero());// 3
store.dispatch(addHero());// 4
store.dispatch(setHero(10));// 10
store.dispatch(addMovie());// 1
store.dispatch(addMovie());// 2
store.dispatch(addMovie());// 3
store.dispatch(removeMovie());// 2
store.dispatch(addMovie());// 3
store.dispatch(removeMovie());// 2
store.dispatch(addMovie());// 3
store.dispatch(addMovie());// 4
store.dispatch(setMovie(10));// 10
// unsubscribe();
// store.dispatch(addHero());// 11
// store.dispatch(addHero());// 12
